<!DOCTYPE html>
<html>
<head>

	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">

	<meta http-equiv="X-UA-Compatible" content="chrome=1">
	<meta name="description" content="Dust-motes : Repository for contributed helper and filter extensions to dust">
	<link rel="stylesheet" type="text/css" media="screen" href="../stylesheets/stylesheet.css"></link>

	<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">

	<script src="http://cdn.jsdelivr.net/jquery/2.0.3/jquery-2.0.3.js"></script>
	<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

    <title>Dust-motes</title>
  </head>

  <body>

    <!-- HEADER -->
    <div class="hdr">
	<h1 class="hdr-title">Dust-motes</h1>
	<h2 class="desc">HELPERS / CONTROL
    </h2></div>
  
    
  <div class="row">
    <div class="col-md-2">
     <ul class="nav">
          <li> <a href="http://rragan.github.io/dust-motes/docs/helpers-control.html"><strong>Control</strong></a> </li>
        </ul>
        <ul class="nav">
          <li> <a href="http://rragan.github.io/dust-motes/docs/helpers-data.html">Data</a> </li>
        </ul>
        <ul class="nav">
          <li> <a href="http://rragan.github.io/dust-motes/docs/helpers-html.html">HTML</a> </li>
        </ul>
        <ul class="nav">
          <li> <a href="http://rragan.github.io/dust-motes/docs/helpers-miscellaneous.html">Miscellaneous</a> </li>
        </ul>
        <ul class="nav">
          <li> <a href="http://rragan.github.io/dust-motes/docs/helpers-strings.html">Strings</a> </li>
        </ul>
    </div>
    
<a href="iterate">
    <div class="col-md-9">
        <h3>iterate</h3>
        <p></p><h4>{@iterate key=obj sort=xxx /}</h4><p></p>
	      <p></p><p><em>Iterate over a JavaScript object</em></p><p></p>
	      <p></p><p>Parameters:
  	      <ul>
            <li><code>key</code> : object to iterate over</li>
           </ul>
           <ul>
            <li><code>sort (optional)</code>: Optional parameter to select sorted output based on the keys. Value can be "asc" for ascending sort, "desc" for descending sort or any other string that defines a user-supplied comparison function for the sort.</li>
          </ul>
        </p>

        <p></p><p>Examples:
          <p>
            <pre><code>
              Show $key, $value, an $type usage
              Data: { obj: {a:"A", b:"B", c:"C" } }

              {@iterate key=obj}
                {$key}:{$value} {$type} 
              {/iterate}

              Output: a:A string b:B string c:C string
          </code></pre>

          <pre><code>
            Ascending sort
              Data: { obj: {c:"C", a:"A", b:"B" } }

              {@iterate key=obj sort="asc"}
                {$key}:{$value}
              {/iterate}

              Output: a:A b:B c:C
          </code></pre>


          <pre><code>
              User-defined compare function for numeric sort. The function must be in the dust globals.
              var compareNumbers = function(a,b) {
                var aa= parseInt(a, 10); 
                var bb = parseInt(b, 10);
                return aa-bb;
              }

              Data: { obj: {10:"C", 1:"A", 300:"B" }  }

              {@iterate key=obj sort="compareNumbers"}
                {$key}:{$value}
              {/iterate}

              Output: 1:A 10:C 300:B 
          </code></pre>
    </p>
  </div>
</div>

<p></p>
<a href="if">
    <div class="col-md-9">
        <h3>if</h3>
        <p></p><h4>{@if test=expr}...{/if}</h4><p></p>
	      <p></p><p><em>If test expr and if true, evaluate body</em></p><p></p>
	      <p></p><p>Parameters:
  	      <ul>
            <li><code>test</code> : expression to evaluate</li>
           </ul>
        </p>
	<p>
           The test="expr" expression is intentionally limited. So what is allowed is:<p></p>

           The variables are restricted to dust names and path  used to access values from the context. 
           Constants are JavaScript integer, float, hex and string forms ("xx" or 'xx'). 
           Operands can be a "variable", a constant, or a binary or unary expression yielding a value. 
           Relational operators are <, >, <=, >=, ==, !=. Boolean operators are ! (unary), || and &&.. 
           Operator precedence is the same as JavaScript and parentheses are allowed for clarity or for when the precedence is not what you want.
	</p>
        <p>
Expressions are easier to write because names and paths do not have to be wrapped in braces or braces within quotes. 
For example, using the original if helper you write {@if cond="\'{state}\' == 'CA' "} versus {@if test="state == 'CA'} with this one.
       </p>

        <p></p><p>Examples:
          <p>
            <pre><code>
		Context:
		 { 
		    x:1,
                    y:2, 
                    a: {b: 5}, 
                    arr: [1, 2, 3], nums:[1, 2, 3]
                 }

               {@if test="x"}3{/if} is true and outputs 3 
               {@if test="a.b == 5"}5{/if} is true and outputs 5 
               {@if test="arr[nums[1]]==3"}3{/if} is true and outputs 3 
               {@if test="2>1 && 3>=3 && 4==4"}true{/if} outputs true 
               {@if test=" x && y "}X and Y exist{:else}X and Y do not exists/if} outputs "X and Y exist" 
               {#arr}{@if test=". < 4"}1{/if}{/arr} outputs 111 because all elements of arr are < 4 
               {@if test="!!0"}true{:else}false{/if} outputs false
          </code></pre>
    </p>

   <p></p><p>Notes: 
   <ul>
   <li>A cond="expr" attribute is supported as an alternative to test="expr". It is compatible
with the original if helper but uses eval so you should avoid it. It is provided to make migration to the
new non-eval form easier.
   </li>
   <li>The == and != operator use the JavaScript === and !== operators when making tests. Since dust is
not JavaScript, the simpler == and != forms are used as they seem clearer.
   </ul> 

  </div>
</body></html>
